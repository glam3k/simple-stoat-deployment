# Root configuration for Stoat infrastructure
# Copy to .env and edit before running any deploy scripts.

# Required: base domain for your deployment (no protocol).
BASE_DOMAIN=<domain>

# Optional: per-service subdomains. Leave blank to serve from the bare base domain.
STOAT_SUBDOMAIN=chat
AUTH_SUBDOMAIN=sso
ADMIN_SUBDOMAIN=admin

# Optional: override full hostnames if they don't follow <subdomain>.<base_domain>.
# Uncomment and set to values like community.example.net to bypass subdomain derivation.
# STOAT_FQDN=
# AUTH_FQDN=
# ADMIN_FQDN=

# Set to 1 to use Caddy's internal CA instead of Let's Encrypt (handy for CI/local)
CADDY_USE_INTERNAL_CA=0

# Core resource tuning (per-VPS sizing)
STOAT_DB_CPUS=0.8
STOAT_DB_MEMORY=1g
STOAT_DB_MEMORY_RESERVATION=768m

STOAT_REDIS_CPUS=0.2
STOAT_REDIS_MEMORY=256m
STOAT_REDIS_MEMORY_RESERVATION=128m
STOAT_RABBIT_CPUS=0.2
STOAT_RABBIT_MEMORY=256m
STOAT_RABBIT_MEMORY_RESERVATION=128m

STOAT_MINIO_CPUS=0.2
STOAT_MINIO_MEMORY=256m
STOAT_MINIO_MEMORY_RESERVATION=128m

STOAT_API_CPUS=0.3
STOAT_API_MEMORY=512m
STOAT_API_MEMORY_RESERVATION=256m
STOAT_EVENTS_CPUS=0.3

STOAT_EVENTS_MEMORY=384m
STOAT_EVENTS_MEMORY_RESERVATION=192m
STOAT_WEB_CPUS=0.2
STOAT_WEB_MEMORY=256m
STOAT_WEB_MEMORY_RESERVATION=128m

# Authentik resource tuning (per-VPS sizing)
AUTHENTIK_POSTGRES_CPUS=0.3
AUTHENTIK_POSTGRES_MEMORY=384m
AUTHENTIK_POSTGRES_MEMORY_RESERVATION=256m
AUTHENTIK_REDIS_CPUS=0.1
AUTHENTIK_REDIS_MEMORY=128m
AUTHENTIK_REDIS_MEMORY_RESERVATION=64m
